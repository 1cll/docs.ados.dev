# Написание copilot-instructions.md

`copilot-instructions.md` — файл, предоставляющий ИИ-агентам правила и контекст, специфичные для репозитория. ADOS использует этот файл для значительного повышения качества реализации.

## Расположение файла

```
.github/copilot-instructions.md
```

Разместите в директории `.github/` в корне репозитория.

## Базовая структура

```markdown
# Обзор проекта
Этот репозиторий — бэкенд API для ○○.

# Технологический стек
- Язык: TypeScript
- Фреймворк: Express.js
- База данных: PostgreSQL + Prisma
- Тестирование: Jest

# Конвенции кода
- Используйте camelCase для переменных
- Функции записывайте как стрелочные
- Всегда используйте try-catch для обработки ошибок

# Структура файлов
- `src/controllers/` — API-контроллеры
- `src/services/` — Бизнес-логика
- `src/models/` — Модели Prisma
- `src/middleware/` — Middleware Express

# Правила тестирования
- Пишите юнит-тесты для всех сервисных функций
- Файлы тестов размещайте в директории `__tests__/`
- Давайте тестам описательные имена

# Запрещённые паттерны
- Не используйте тип `any`
- Не используйте `console.log` (используйте логгер)
- Не пишите сырые SQL-запросы (используйте Prisma)
```

## Советы по написанию эффективных инструкций

### 1. Будьте конкретны

❌ Плохой пример:
```markdown
Пишите чистый код
```

✅ Хороший пример:
```markdown
- Функции не более 30 строк
- Максимум 3 уровня вложенности
- Используйте паттерн раннего возврата
```

### 2. Опишите архитектуру

```markdown
# Архитектура
- Используется Clean Architecture
- Слои: Controller → UseCase → Repository
- Направление зависимостей: внешнее → внутреннее
- DI-контейнер: tsyringe
```

### 3. Покажите существующие паттерны

```markdown
# Как добавить новый API эндпоинт
1. Создайте контроллер в `src/controllers/`
2. Создайте соответствующий сервис в `src/services/`
3. Добавьте маршрут в `src/routes.ts`
4. Создайте тесты в `src/__tests__/`

Образец: `src/controllers/users.controller.ts`
```

### 4. Перечислите запрещённые паттерны

```markdown
# Чего следует избегать
- Глобальные переменные
- Синхронные файловые операции (напр., fs.readFileSync)
- Прямой доступ к переменным окружения (используйте модуль config)
- Магические числа
```

### 5. Правила для языка/фреймворка

```markdown
# Правила React
- Не используйте классовые компоненты (только Functional Components)
- Для управления состоянием используйте useState / useReducer
- Для глобального состояния используйте Zustand
- Используйте утилитарные классы Tailwind CSS

# Формат ответов API
Все API должны возвращать ответы в формате:
{
  "success": true,
  "data": { ... },
  "error": null
}
```

## Другие файлы, используемые ADOS

| Файл | Назначение |
|------|------------|
| `.github/copilot-instructions.md` | Основной файл инструкций |
| `.ados.yaml` | Конфигурация ADOS |
| `README.md` | Обзор проекта |
| `CONTRIBUTING.md` | Руководство для контрибьюторов |

> [!TIP]
> Качество `copilot-instructions.md` напрямую влияет на качество реализации ИИ. Стремитесь к тому же уровню детализации, что и в документации для онбординга новых участников команды.
