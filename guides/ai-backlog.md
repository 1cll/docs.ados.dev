# AI バックログ生成

AI バックログ生成は、リポジトリのコードを分析して改善提案を自動的に Issue 化する機能です。

## 概要

AI がリポジトリ全体をスキャンし、以下の観点で改善ポイントを Issue として提案します：

- **セキュリティ** — 脆弱性やリスクの高いパターン
- **パフォーマンス** — ボトルネックや非効率なコード
- **コード品質** — 重複コード、複雑度の高い関数
- **テスト** — テストカバレッジの低い部分
- **ドキュメント** — 不足しているドキュメント

## 使い方

### ダッシュボードから

1. ダッシュボードで対象リポジトリを選択
2. **Backlog** タブに移動
3. **バックログを生成** をクリック
4. AI がリポジトリを分析（数分かかります）
5. 生成された提案を確認
6. 必要な項目を選択して **Issue を作成**

### API から

```bash
# バックログ生成を開始
POST /api/github/{owner}/{repo}/backlog/generate

# 生成結果を取得
GET /api/github/{owner}/{repo}/backlog
```

## 2パス分析

バックログ生成は 2 段階の分析プロセスで行われます：

### パス 1: 広範スキャン
- リポジトリ全体のファイル構造を把握
- 主要なファイルの概要を分析
- 技術スタックとアーキテクチャを理解

### パス 2: 深掘り分析
- パス 1 の結果を基に、重点領域を深掘り
- 具体的なコード行レベルの改善提案
- 優先度の付与（High / Medium / Low）

## フォーカスエリア

分析の重点領域をカスタマイズできます：

```yaml
repos:
  - name: my-repo
    workers:
      autopilot:
        focus:
          - security
          - performance
          - test-coverage
```

| フォーカス | 説明 |
|-----------|------|
| `security` | セキュリティの脆弱性・リスク |
| `performance` | パフォーマンスの改善ポイント |
| `code-quality` | コード品質・可読性 |
| `test-coverage` | テストカバレッジの向上 |
| `documentation` | ドキュメントの整備 |
| `accessibility` | アクセシビリティの改善 |
| `refactoring` | リファクタリングの提案 |

## カスタムプロンプト

独自の分析観点を追加できます：

```yaml
repos:
  - name: my-repo
    workers:
      autopilot:
        focus:
          - "APIのレスポンス形式が統一されているか確認"
          - "エラーハンドリングのベストプラクティスに従っているか"
```

## 生成される Issue の形式

AI が生成する Issue には以下の情報が含まれます：

```markdown
## 問題
`src/services/auth.ts` の認証ロジックで JWT トークンの有効期限チェックが
実装されていません。

## 影響
期限切れのトークンでもアクセスが可能になるセキュリティリスクがあります。

## 提案する修正
- `validateToken()` 関数に有効期限チェックを追加
- 期限切れの場合は 401 Unauthorized を返す

## 対象ファイル
- `src/services/auth.ts` (L45-L60)
- `src/middleware/auth.middleware.ts` (L12)

## 優先度
🔴 High
```

> [!TIP]
> 生成された Issue には自動的に `ados` ラベルが付与されるため、AutoPilot モードと組み合わせると、提案から実装まで完全自動化できます。
